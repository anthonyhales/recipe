
{% extends "base.html" %}
{% block content %}
<div class="card p-3 mb-3">
  <input id="url" class="form-control mb-2" placeholder="https://www.bbc.co.uk/food/recipes">
  <button class="btn btn-success" onclick="start()">Run full crawl</button>
  <button class="btn btn-danger ms-2" onclick="stop()">Stop</button>
</div>
<div id="status" class="alert alert-info">Idle</div>
<a href="/download/csv" class="btn btn-outline-secondary btn-sm">CSV</a>
<a href="/download/txt" class="btn btn-outline-secondary btn-sm">TXT</a>
<script>
function start(){
 fetch("/start",{method:"POST",body:new URLSearchParams({url:document.getElementById("url").value})});
}
function stop(){ fetch("/stop",{method:"POST"}); }
setInterval(()=>{
 fetch("/status").then(r=>r.json()).then(d=>{
  document.getElementById("status").innerText = d.status + " | URLs: " + d.count;
 });
},1500);
</script>
{% endblock %}
